<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test - Hide All Issues</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .debug-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        
        .success { background: #d4edda; border-left: 4px solid #28a745; }
        .error { background: #f8d7da; border-left: 4px solid #dc3545; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; }
        
        .test-button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .code-output {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>🔍 Hide All 问题诊断工具</h1>
    
    <div class="debug-section">
        <h2>问题1 & 2: User Reviews 滚动卡片缺失</h2>
        <div id="testimonials-status" class="status warning">检测中...</div>
        <button class="test-button" onclick="testTestimonials()">测试用户评价模块</button>
        <div id="testimonials-output" class="code-output"></div>
    </div>
    
    <div class="debug-section">
        <h2>问题3: Privacy Features 自动轮播和点击问题</h2>
        <div id="privacy-status" class="status warning">检测中...</div>
        <button class="test-button" onclick="testPrivacyFeatures()">测试隐私功能模块</button>
        <div id="privacy-output" class="code-output"></div>
    </div>
    
    <div class="debug-section">
        <h2>AITDK SEO Extension 状态</h2>
        <div id="extension-status" class="status warning">检测中...</div>
        <button class="test-button" onclick="testExtension()">测试扩展程序</button>
        <div id="extension-output" class="code-output"></div>
    </div>

    <script>
        // 设置扩展程序兼容性
        window.extensionFriendly = true;
        window.seoToolsCompatible = true;
        window.AITDKSEOExtensionEnabled = true;
        
        function updateStatus(elementId, status, message) {
            const element = document.getElementById(elementId);
            element.className = `status ${status}`;
            element.textContent = message;
        }
        
        function updateOutput(elementId, content) {
            document.getElementById(elementId).textContent = content;
        }
        
        function testTestimonials() {
            let output = '=== User Reviews 模块诊断 ===\n\n';
            
            try {
                // 检查HTML容器
                const container = document.getElementById('testimonials-scroll');
                output += `1. 容器检查:\n`;
                if (container) {
                    output += `   ✅ testimonials-scroll 容器找到\n`;
                    output += `   内容: ${container.innerHTML.length > 0 ? container.innerHTML.substring(0, 100) + '...' : '空'}\n`;
                } else {
                    output += `   ❌ testimonials-scroll 容器未找到\n`;
                }
                
                // 检查数据
                output += `\n2. 数据检查:\n`;
                if (typeof testimonialsData !== 'undefined') {
                    output += `   ✅ testimonialsData 已定义\n`;
                    output += `   语言数量: ${Object.keys(testimonialsData).length}\n`;
                    output += `   英文评价数量: ${testimonialsData.en ? testimonialsData.en.length : 0}\n`;
                } else {
                    output += `   ❌ testimonialsData 未定义\n`;
                }
                
                // 检查函数
                output += `\n3. 函数检查:\n`;
                if (typeof initTestimonials === 'function') {
                    output += `   ✅ initTestimonials 函数存在\n`;
                } else {
                    output += `   ❌ initTestimonials 函数不存在\n`;
                }
                
                // 检查CSS样式
                output += `\n4. CSS样式检查:\n`;
                const testimonialsSection = document.querySelector('.testimonials');
                if (testimonialsSection) {
                    const styles = window.getComputedStyle(testimonialsSection);
                    output += `   ✅ .testimonials 元素找到\n`;
                    output += `   背景: ${styles.background}\n`;
                    output += `   显示: ${styles.display}\n`;
                } else {
                    output += `   ❌ .testimonials 元素未找到\n`;
                }
                
                updateStatus('testimonials-status', 'warning', '诊断完成 - 查看详细输出');
                
            } catch (error) {
                output += `\n❌ 错误: ${error.message}\n`;
                updateStatus('testimonials-status', 'error', '诊断过程中出错');
            }
            
            updateOutput('testimonials-output', output);
        }
        
        function testPrivacyFeatures() {
            let output = '=== Privacy Features 模块诊断 ===\n\n';
            
            try {
                // 检查HTML元素
                output += `1. HTML元素检查:\n`;
                const emoji = document.getElementById('privacy-emoji');
                const title = document.getElementById('privacy-card-title');
                const desc = document.getElementById('privacy-card-desc');
                const dots = document.querySelectorAll('.privacy-dot');
                const cards = document.querySelectorAll('.privacy-small-card');
                
                output += `   privacy-emoji: ${emoji ? '✅ 找到' : '❌ 未找到'}\n`;
                output += `   privacy-card-title: ${title ? '✅ 找到' : '❌ 未找到'}\n`;
                output += `   privacy-card-desc: ${desc ? '✅ 找到' : '❌ 未找到'}\n`;
                output += `   privacy-dot 数量: ${dots.length}\n`;
                output += `   privacy-small-card 数量: ${cards.length}\n`;
                
                // 检查数据
                output += `\n2. 数据检查:\n`;
                if (typeof privacyFeatures !== 'undefined') {
                    output += `   ✅ privacyFeatures 已定义\n`;
                    output += `   功能数量: ${privacyFeatures.length}\n`;
                    if (privacyFeatures.length > 0) {
                        output += `   第一个功能: ${JSON.stringify(privacyFeatures[0], null, 2)}\n`;
                    }
                } else {
                    output += `   ❌ privacyFeatures 未定义\n`;
                }
                
                // 检查当前索引
                output += `\n3. 状态检查:\n`;
                if (typeof currentPrivacyIndex !== 'undefined') {
                    output += `   ✅ currentPrivacyIndex: ${currentPrivacyIndex}\n`;
                } else {
                    output += `   ❌ currentPrivacyIndex 未定义\n`;
                }
                
                if (typeof privacyInterval !== 'undefined') {
                    output += `   定时器状态: ${privacyInterval ? '运行中' : '已停止'}\n`;
                } else {
                    output += `   ❌ privacyInterval 未定义\n`;
                }
                
                // 检查函数
                output += `\n4. 函数检查:\n`;
                const functions = ['initPrivacyFeatures', 'initPrivacyFeaturesData'];
                functions.forEach(funcName => {
                    if (typeof window[funcName] === 'function') {
                        output += `   ✅ ${funcName} 函数存在\n`;
                    } else {
                        output += `   ❌ ${funcName} 函数不存在\n`;
                    }
                });
                
                updateStatus('privacy-status', 'warning', '诊断完成 - 查看详细输出');
                
            } catch (error) {
                output += `\n❌ 错误: ${error.message}\n`;
                updateStatus('privacy-status', 'error', '诊断过程中出错');
            }
            
            updateOutput('privacy-output', output);
        }
        
        function testExtension() {
            let output = '=== AITDK SEO Extension 诊断 ===\n\n';
            
            try {
                // 检查扩展程序相关元素
                output += `1. 扩展程序元素检查:\n`;
                const extensionElements = document.querySelectorAll('[id*="aitdk"], [class*="aitdk"], [id*="seo"], [class*="seo"]');
                output += `   扩展程序相关元素数量: ${extensionElements.length}\n`;
                
                // 检查全局变量
                output += `\n2. 全局变量检查:\n`;
                output += `   extensionFriendly: ${window.extensionFriendly}\n`;
                output += `   seoToolsCompatible: ${window.seoToolsCompatible}\n`;
                output += `   AITDKSEOExtensionEnabled: ${window.AITDKSEOExtensionEnabled}\n`;
                output += `   AITDK_COMPATIBLE: ${window.AITDK_COMPATIBLE}\n`;
                
                // 检查Meta标签
                output += `\n3. Meta标签检查:\n`;
                const metaTags = ['aitdk-seo-extension', 'seo-tools-compatible', 'extension-friendly'];
                metaTags.forEach(name => {
                    const meta = document.querySelector(`meta[name="${name}"]`);
                    output += `   ${name}: ${meta ? meta.content : '未找到'}\n`;
                });
                
                // 检查CSS兼容性规则
                output += `\n4. CSS兼容性检查:\n`;
                const styleSheets = Array.from(document.styleSheets);
                let hasCompatRules = false;
                try {
                    styleSheets.forEach(sheet => {
                        if (sheet.href && sheet.href.includes('styles.css')) {
                            output += `   找到 styles.css\n`;
                            // 简单检查是否有扩展程序相关样式
                            hasCompatRules = true;
                        }
                    });
                } catch (e) {
                    output += `   CSS检查受限: ${e.message}\n`;
                }
                
                updateStatus('extension-status', hasCompatRules ? 'success' : 'warning', 
                           hasCompatRules ? '扩展程序支持已启用' : '需要检查CSS兼容性');
                
            } catch (error) {
                output += `\n❌ 错误: ${error.message}\n`;
                updateStatus('extension-status', 'error', '诊断过程中出错');
            }
            
            updateOutput('extension-output', output);
        }
        
        // 页面加载完成后自动运行基本检测
        document.addEventListener('DOMContentLoaded', function() {
            // 创建扩展程序标识元素
            const marker = document.createElement('div');
            marker.id = 'aitdk-seo-extension-marker';
            marker.style.display = 'none';
            marker.setAttribute('data-extension-friendly', 'true');
            marker.setAttribute('data-seo-tools-ready', 'true');
            document.body.appendChild(marker);
            
            setTimeout(() => {
                testTestimonials();
                testPrivacyFeatures();
                testExtension();
            }, 1000);
        });
    </script>
</body>
</html> 