<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AITDK SEO Extension å…¼å®¹æ€§è¯Šæ–­ - Hide All</title>
    <meta name="description" content="è¯Šæ–­AITDK SEO Extensionæ’ä»¶åœ¨Hide Allç½‘ç«™ä¸Šçš„å…¼å®¹æ€§é—®é¢˜">
    <meta name="keywords" content="AITDK, SEO Extension, compatibility, debug">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
            line-height: 1.6;
        }
        
        .diagnostic-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .status-good {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .status-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .status-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .code-block {
            background: #f1f3f4;
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .info-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .check-button {
            background: #007bff;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        
        .check-button:hover {
            background: #0056b3;
        }
        
        .fix-button {
            background: #28a745;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        
        .fix-button:hover {
            background: #1e7e34;
        }
        
        .section-title {
            color: #495057;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .extension-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background: #f8f9fa;
            font-weight: 600;
        }
        
        .toggle-details {
            cursor: pointer;
            color: #007bff;
            text-decoration: underline;
        }
        
        .details-content {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="diagnostic-container">
        <h1>ğŸ” AITDK SEO Extension å…¼å®¹æ€§è¯Šæ–­</h1>
        <p>æ­¤å·¥å…·ç”¨äºè¯Šæ–­AITDK SEO Extensionæ’ä»¶åœ¨å½“å‰ç½‘ç«™ä¸Šçš„å…¼å®¹æ€§é—®é¢˜</p>
        
        <div class="extension-info">
            <h3>ğŸ“Œ å…³äº AITDK SEO Extension</h3>
            <p><strong>åŠŸèƒ½:</strong> åˆ†æç½‘é¡µSEOå…ƒç´ ï¼Œæä¾›ä¼˜åŒ–å»ºè®®</p>
            <p><strong>å¸¸è§é—®é¢˜:</strong> å†…å®¹å®‰å…¨ç­–ç•¥å†²çªã€JavaScripté”™è¯¯ã€é¡µé¢ç»“æ„å˜åŒ–</p>
            <p><strong>æ£€æµ‹æ—¶é—´:</strong> <span id="check-time"></span></p>
        </div>

        <div class="info-grid">
            <div class="info-card">
                <h4>ğŸŒ å½“å‰é¡µé¢ä¿¡æ¯</h4>
                <p><strong>URL:</strong> <span id="current-url"></span></p>
                <p><strong>Title:</strong> <span id="page-title"></span></p>
                <p><strong>Metaæè¿°:</strong> <span id="meta-description"></span></p>
            </div>
            
            <div class="info-card">
                <h4>ğŸ”§ æµè§ˆå™¨ç¯å¢ƒ</h4>
                <p><strong>ç”¨æˆ·ä»£ç†:</strong> <span id="user-agent"></span></p>
                <p><strong>Chromeç‰ˆæœ¬:</strong> <span id="chrome-version"></span></p>
                <p><strong>æ’ä»¶æ£€æµ‹:</strong> <span id="extension-detected"></span></p>
            </div>
        </div>

        <h2 class="section-title">ğŸ” å…¼å®¹æ€§æ£€æµ‹ç»“æœ</h2>
        
        <div id="diagnostic-results">
            <div class="status-warning">
                ğŸ”„ æ­£åœ¨è¿›è¡Œå…¼å®¹æ€§æ£€æµ‹...
            </div>
        </div>

        <div style="text-align: center; margin: 20px 0;">
            <button class="check-button" onclick="runDiagnostics()">
                ğŸ”„ é‡æ–°æ£€æµ‹
            </button>
            <button class="fix-button" onclick="applyFixes()">
                ğŸ› ï¸ åº”ç”¨ä¿®å¤
            </button>
            <button class="check-button" onclick="exportReport()">
                ğŸ“„ å¯¼å‡ºæŠ¥å‘Š
            </button>
        </div>

        <h2 class="section-title">ğŸ› ï¸ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ</h2>
        
        <div class="info-card">
            <h4>ğŸ’¡ å¸¸è§ä¿®å¤æ–¹æ³•</h4>
            <ol>
                <li><strong>åˆ·æ–°æ’ä»¶:</strong> ç¦ç”¨å¹¶é‡æ–°å¯ç”¨AITDK SEO Extension</li>
                <li><strong>æ¸…é™¤ç¼“å­˜:</strong> æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’Œæ’ä»¶æ•°æ®</li>
                <li><strong>æƒé™æ£€æŸ¥:</strong> ç¡®ä¿æ’ä»¶æœ‰è®¿é—®å½“å‰ç½‘ç«™çš„æƒé™</li>
                <li><strong>æ›´æ–°æ’ä»¶:</strong> æ£€æŸ¥Chrome Web Storeä¸­çš„æ’ä»¶æ›´æ–°</li>
                <li><strong>å…¼å®¹æ¨¡å¼:</strong> ä¸´æ—¶ç¦ç”¨å…¶ä»–å¯èƒ½å†²çªçš„æ’ä»¶</li>
            </ol>
        </div>

        <div class="toggle-details" onclick="toggleDetails('technical-details')">
            ğŸ“‹ æŸ¥çœ‹æŠ€æœ¯è¯¦æƒ…
        </div>
        <div id="technical-details" class="details-content">
            <h4>æŠ€æœ¯åˆ†æ</h4>
            <table>
                <tr>
                    <th>æ£€æµ‹é¡¹ç›®</th>
                    <th>çŠ¶æ€</th>
                    <th>è¯´æ˜</th>
                </tr>
                <tbody id="technical-table">
                    <!-- åŠ¨æ€å¡«å…… -->
                </tbody>
            </table>
        </div>

        <div class="toggle-details" onclick="toggleDetails('console-logs')">
            ğŸ“ æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
        </div>
        <div id="console-logs" class="details-content">
            <h4>JavaScriptæ§åˆ¶å°è¾“å‡º</h4>
            <div class="code-block" id="console-output">
                æ£€æµ‹ä¸­...
            </div>
        </div>
    </div>

    <script>
        let diagnosticData = {};
        
        // æ•è·æ§åˆ¶å°è¾“å‡º
        const originalConsole = {
            log: console.log,
            error: console.error,
            warn: console.warn
        };
        
        let consoleMessages = [];
        
        ['log', 'error', 'warn'].forEach(method => {
            console[method] = function(...args) {
                consoleMessages.push({
                    type: method,
                    message: args.join(' '),
                    timestamp: new Date().toISOString()
                });
                originalConsole[method].apply(console, args);
            };
        });
        
        function toggleDetails(id) {
            const element = document.getElementById(id);
            element.style.display = element.style.display === 'none' ? 'block' : 'none';
        }
        
        function detectChromeVersion() {
            const userAgent = navigator.userAgent;
            const chromeMatch = userAgent.match(/Chrome\/(\d+)/);
            return chromeMatch ? chromeMatch[1] : 'Unknown';
        }
        
        function detectExtension() {
            // å°è¯•æ£€æµ‹AITDK SEO Extension
            const extensionIndicators = [
                'aitdk-seo-extension',
                'seo-extension',
                '__aitdk',
                '_aitdk_seo'
            ];
            
            let detected = false;
            extensionIndicators.forEach(indicator => {
                if (document.querySelector(`[data-${indicator}]`) || 
                    window[indicator] || 
                    document.documentElement.hasAttribute(`data-${indicator}`)) {
                    detected = true;
                }
            });
            
            return detected;
        }
        
        function checkCSP() {
            const metaTags = document.querySelectorAll('meta[http-equiv="Content-Security-Policy"]');
            return metaTags.length > 0 ? Array.from(metaTags).map(tag => tag.content) : null;
        }
        
        function checkFrameOptions() {
            const metaTags = document.querySelectorAll('meta[http-equiv="X-Frame-Options"]');
            return metaTags.length > 0 ? Array.from(metaTags).map(tag => tag.content) : null;
        }
        
        function analyzeScripts() {
            const scripts = document.querySelectorAll('script[src]');
            return Array.from(scripts).map(script => ({
                src: script.src,
                async: script.async,
                defer: script.defer,
                type: script.type || 'text/javascript'
            }));
        }
        
        function checkJavaScriptErrors() {
            const errors = [];
            
            window.addEventListener('error', function(e) {
                errors.push({
                    message: e.message,
                    filename: e.filename,
                    lineno: e.lineno,
                    colno: e.colno
                });
            });
            
            return errors;
        }
        
        function runDiagnostics() {
            console.log('ğŸ” å¼€å§‹AITDK SEO Extensionå…¼å®¹æ€§è¯Šæ–­...');
            
            // æ›´æ–°åŸºæœ¬ä¿¡æ¯
            document.getElementById('check-time').textContent = new Date().toLocaleString();
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('page-title').textContent = document.title;
            
            const metaDesc = document.querySelector('meta[name="description"]');
            document.getElementById('meta-description').textContent = 
                metaDesc ? metaDesc.content.substring(0, 100) + '...' : 'æœªè®¾ç½®';
            
            document.getElementById('user-agent').textContent = 
                navigator.userAgent.substring(0, 50) + '...';
            document.getElementById('chrome-version').textContent = detectChromeVersion();
            document.getElementById('extension-detected').textContent = 
                detectExtension() ? 'âœ… æ£€æµ‹åˆ°æ‰©å±•ç¨‹åºæ ‡è¯†' : 'âŒ æœªæ£€æµ‹åˆ°æ‰©å±•ç¨‹åº';
            
            // æ”¶é›†è¯Šæ–­æ•°æ®
            diagnosticData = {
                timestamp: new Date().toISOString(),
                url: window.location.href,
                userAgent: navigator.userAgent,
                chromeVersion: detectChromeVersion(),
                extensionDetected: detectExtension(),
                csp: checkCSP(),
                frameOptions: checkFrameOptions(),
                scripts: analyzeScripts(),
                consoleMessages: consoleMessages,
                metaTags: Array.from(document.querySelectorAll('meta')).map(meta => ({
                    name: meta.name,
                    content: meta.content,
                    httpEquiv: meta.httpEquiv
                }))
            };
            
            // ç”Ÿæˆè¯Šæ–­ç»“æœ
            generateDiagnosticResults();
            updateTechnicalTable();
            updateConsoleOutput();
        }
        
        function generateDiagnosticResults() {
            const resultsContainer = document.getElementById('diagnostic-results');
            let results = '';
            
            // æ£€æŸ¥åŸºæœ¬å…¼å®¹æ€§
            if (diagnosticData.chromeVersion && parseInt(diagnosticData.chromeVersion) >= 88) {
                results += `
                    <div class="status-good">
                        âœ… <strong>Chromeç‰ˆæœ¬å…¼å®¹</strong><br>
                        å½“å‰Chromeç‰ˆæœ¬ ${diagnosticData.chromeVersion} æ”¯æŒç°ä»£æ‰©å±•ç¨‹åºAPI
                    </div>
                `;
            } else {
                results += `
                    <div class="status-error">
                        âŒ <strong>Chromeç‰ˆæœ¬è¿‡ä½</strong><br>
                        å»ºè®®æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„Chromeæµè§ˆå™¨
                    </div>
                `;
            }
            
            // æ£€æŸ¥CSP
            if (diagnosticData.csp && diagnosticData.csp.length > 0) {
                results += `
                    <div class="status-warning">
                        âš ï¸ <strong>å‘ç°å†…å®¹å®‰å…¨ç­–ç•¥(CSP)</strong><br>
                        å¯èƒ½é™åˆ¶æ’ä»¶æ³¨å…¥è„šæœ¬ï¼š${diagnosticData.csp.join(', ')}
                    </div>
                `;
            } else {
                results += `
                    <div class="status-good">
                        âœ… <strong>æ— CSPé™åˆ¶</strong><br>
                        æœªå‘ç°å¯èƒ½å¹²æ‰°æ’ä»¶çš„å†…å®¹å®‰å…¨ç­–ç•¥
                    </div>
                `;
            }
            
            // æ£€æŸ¥JavaScripté”™è¯¯
            const errorMessages = diagnosticData.consoleMessages.filter(msg => msg.type === 'error');
            if (errorMessages.length > 0) {
                results += `
                    <div class="status-warning">
                        âš ï¸ <strong>å‘ç°JavaScripté”™è¯¯</strong><br>
                        ${errorMessages.length} ä¸ªé”™è¯¯å¯èƒ½å½±å“æ’ä»¶åŠŸèƒ½
                    </div>
                `;
            } else {
                results += `
                    <div class="status-good">
                        âœ… <strong>æ— JavaScripté”™è¯¯</strong><br>
                        é¡µé¢JavaScriptè¿è¡Œæ­£å¸¸
                    </div>
                `;
            }
            
            // æ£€æŸ¥æ‰©å±•ç¨‹åºæ£€æµ‹
            if (!diagnosticData.extensionDetected) {
                results += `
                    <div class="status-warning">
                        âš ï¸ <strong>æœªæ£€æµ‹åˆ°æ’ä»¶æ´»åŠ¨</strong><br>
                        AITDK SEO Extensionå¯èƒ½æœªæ­£ç¡®åŠ è½½æˆ–è¿è¡Œ
                    </div>
                `;
            }
            
            resultsContainer.innerHTML = results;
        }
        
        function updateTechnicalTable() {
            const tableBody = document.getElementById('technical-table');
            const checks = [
                ['Chromeç‰ˆæœ¬', diagnosticData.chromeVersion, 'ç‰ˆæœ¬88+æ”¯æŒæœ€æ–°æ‰©å±•API'],
                ['CSPç­–ç•¥', diagnosticData.csp ? 'å­˜åœ¨' : 'æ— ', 'å¯èƒ½é™åˆ¶æ’ä»¶è„šæœ¬æ³¨å…¥'],
                ['X-Frame-Options', diagnosticData.frameOptions ? 'å­˜åœ¨' : 'æ— ', 'å¯èƒ½é™åˆ¶iframeåµŒå…¥'],
                ['å¤–éƒ¨è„šæœ¬', diagnosticData.scripts.length, 'è¿‡å¤šè„šæœ¬å¯èƒ½å¯¼è‡´å†²çª'],
                ['æ‰©å±•æ£€æµ‹', diagnosticData.extensionDetected ? 'æ˜¯' : 'å¦', 'æ’ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œ'],
                ['æ§åˆ¶å°é”™è¯¯', diagnosticData.consoleMessages.filter(m => m.type === 'error').length, 'JavaScripté”™è¯¯æ•°é‡']
            ];
            
            tableBody.innerHTML = checks.map(([item, status, description]) => `
                <tr>
                    <td>${item}</td>
                    <td><code>${status}</code></td>
                    <td>${description}</td>
                </tr>
            `).join('');
        }
        
        function updateConsoleOutput() {
            const consoleOutput = document.getElementById('console-output');
            const recentMessages = diagnosticData.consoleMessages.slice(-10);
            
            if (recentMessages.length === 0) {
                consoleOutput.textContent = 'æš‚æ— æ§åˆ¶å°è¾“å‡º';
            } else {
                consoleOutput.innerHTML = recentMessages.map(msg => 
                    `<div><strong>[${msg.type.toUpperCase()}]</strong> ${msg.message}</div>`
                ).join('\n');
            }
        }
        
        function applyFixes() {
            alert(`å»ºè®®çš„ä¿®å¤æ­¥éª¤ï¼š
1. åœ¨Chromeæ‰©å±•ç®¡ç†é¡µé¢(chrome://extensions/)ç¦ç”¨å¹¶é‡æ–°å¯ç”¨AITDK SEO Extension
2. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜: Ctrl+Shift+Del (Windows) æˆ– Cmd+Shift+Del (Mac)
3. ç¡®ä¿æ’ä»¶æœ‰è®¿é—®æ­¤ç½‘ç«™çš„æƒé™
4. æ£€æŸ¥æ’ä»¶æ˜¯å¦æœ‰å¯ç”¨æ›´æ–°
5. ä¸´æ—¶ç¦ç”¨å…¶ä»–å¯èƒ½å†²çªçš„æ’ä»¶è¿›è¡Œæµ‹è¯•`);
        }
        
        function exportReport() {
            const report = {
                ...diagnosticData,
                diagnosis: document.getElementById('diagnostic-results').innerHTML,
                recommendations: [
                    'æ£€æŸ¥æ’ä»¶æƒé™è®¾ç½®',
                    'æ¸…é™¤æµè§ˆå™¨ç¼“å­˜',
                    'æ›´æ–°Chromeæµè§ˆå™¨',
                    'é‡æ–°å®‰è£…æ’ä»¶'
                ]
            };
            
            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `aitdk-seo-extension-diagnostic-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œè¯Šæ–­
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runDiagnostics, 1000);
        });
    </script>
</body>
</html> 