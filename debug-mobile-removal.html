<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>移动端移除功能调试 - Hide All</title>
  <meta name="description" content="调试移动端模块移除功能">
  
  <style>
    .debug-info {
      position: fixed;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.9);
      color: white;
      padding: 15px;
      border-radius: 8px;
      font-size: 12px;
      z-index: 1000;
      max-width: 300px;
    }
    
    .test-section {
      border: 2px solid #ccc;
      margin: 20px 0;
      padding: 20px;
      background: #f9f9f9;
    }
    
    .section-removed {
      border-color: #dc2626;
      background: #fee2e2;
    }
    
    .section-visible {
      border-color: #16a34a;
      background: #dcfce7;
    }
    
    .manual-test {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #3B5AFB;
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-size: 12px;
      z-index: 1000;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- 调试信息 -->
  <div class="debug-info">
    <h3>调试信息</h3>
    <div>屏幕宽度: <span id="screen-width">检测中...</span></div>
    <div>设备类型: <span id="device-type">检测中...</span></div>
    <div>isMobile(): <span id="is-mobile-result">检测中...</span></div>
    <div>Video模块状态: <span id="video-status">检测中...</span></div>
    <div>How Works模块状态: <span id="how-works-status">检测中...</span></div>
    <div>执行时间: <span id="execution-time">检测中...</span></div>
  </div>
  
  <!-- 手动测试按钮 -->
  <div class="manual-test" onclick="manualTest()">
    手动测试移除
  </div>

  <div class="container" style="margin-top: 100px;">
    <h1>移动端移除功能调试</h1>
    
    <!-- 测试说明 -->
    <div class="test-section">
      <h2>测试说明</h2>
      <p>这个页面用于调试移动端模块移除功能。请：</p>
      <ol>
        <li>打开浏览器开发者工具</li>
        <li>切换到移动端模式（如iPhone或Android）</li>
        <li>刷新页面</li>
        <li>观察调试信息和模块状态</li>
        <li>如果自动移除失败，点击"手动测试移除"按钮</li>
      </ol>
    </div>
    
    <!-- How Hide All Works 测试模块 -->
    <div id="how-hide-all-works-section" class="test-section section-visible">
      <h2>How Hide All Works 模块</h2>
      <p>这个模块应该在移动端被替换为简化版本。</p>
      <div style="background: #e5e7eb; padding: 10px; margin: 10px 0;">
        <p>原始内容：5个图片卡片</p>
      </div>
    </div>
    
    <!-- Video Walkthrough 测试模块 -->
    <div id="video-walkthrough-section" class="test-section section-visible">
      <h2>Video Walkthrough 模块</h2>
      <p>这个模块应该在移动端被完全移除。</p>
      <div style="background: #e5e7eb; padding: 10px; margin: 10px 0;">
        <p>原始内容：视频播放器和8个功能列表</p>
        <video width="200" height="150" controls>
          <source src="assets/video1.mp4" type="video/mp4">
          您的浏览器不支持视频标签。
        </video>
      </div>
    </div>
  </div>

  <script>
    let startTime = performance.now();
    
    // 移动端检测函数
    const isMobile = () => {
      return window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    };
    
    // 移动端优化配置
    const mobileOptimizations = {
      // 移动端动态替换How Hide All Works模块
      replaceHowWorksSection: async () => {
        if (isMobile()) {
          const howWorksSection = document.getElementById('how-hide-all-works-section');
          if (howWorksSection) {
            try {
              // 加载移动端简化版本
              const response = await fetch('mobile-how-works-simplified.html');
              const simplifiedContent = await response.text();
              
              // 替换内容
              howWorksSection.outerHTML = simplifiedContent;
              
              console.log('✅ 移动端How Hide All Works模块已优化');
              return true;
            } catch (error) {
              console.warn('❌ 无法加载移动端简化版本:', error);
              return false;
            }
          }
        }
        return false;
      },
      
      // 移动端移除Video Walkthrough模块
      removeVideoWalkthroughSection: () => {
        if (isMobile()) {
          const videoSection = document.getElementById('video-walkthrough-section');
          if (videoSection) {
            // 移除整个Video Walkthrough模块
            videoSection.remove();
            console.log('✅ 移动端Video Walkthrough模块已移除');
            return true;
          }
        }
        return false;
      }
    };
    
    // 更新调试信息
    function updateDebugInfo() {
      const executionTime = (performance.now() - startTime).toFixed(2);
      
      document.getElementById('screen-width').textContent = window.innerWidth + 'px';
      document.getElementById('device-type').textContent = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? '移动设备' : '桌面设备';
      document.getElementById('is-mobile-result').textContent = isMobile() ? 'true' : 'false';
      document.getElementById('execution-time').textContent = executionTime + 'ms';
      
      const videoSection = document.getElementById('video-walkthrough-section');
      const howWorksSection = document.getElementById('how-hide-all-works-section');
      
      document.getElementById('video-status').textContent = videoSection ? '存在' : '已移除';
      document.getElementById('how-works-status').textContent = howWorksSection ? '存在' : '已移除';
    }
    
    // 手动测试函数
    function manualTest() {
      console.log('🔧 开始手动测试...');
      console.log('isMobile():', isMobile());
      console.log('屏幕宽度:', window.innerWidth);
      console.log('用户代理:', navigator.userAgent);
      
      const videoResult = mobileOptimizations.removeVideoWalkthroughSection();
      const howWorksResult = mobileOptimizations.replaceHowWorksSection();
      
      console.log('Video移除结果:', videoResult);
      console.log('How Works替换结果:', howWorksResult);
      
      setTimeout(updateDebugInfo, 500);
    }
    
    // 页面加载完成后执行
    document.addEventListener('DOMContentLoaded', () => {
      console.log('🚀 页面加载完成，开始移动端优化...');
      console.log('isMobile():', isMobile());
      console.log('屏幕宽度:', window.innerWidth);
      
      updateDebugInfo();
      
      // 延迟执行模块操作
      setTimeout(async () => {
        console.log('⏰ 开始执行模块操作...');
        
        const videoResult = mobileOptimizations.removeVideoWalkthroughSection();
        const howWorksResult = await mobileOptimizations.replaceHowWorksSection();
        
        console.log('Video移除结果:', videoResult);
        console.log('How Works替换结果:', howWorksResult);
        
        updateDebugInfo();
      }, 200);
    });
    
    // 监听窗口大小变化
    window.addEventListener('resize', () => {
      console.log('📱 窗口大小改变:', window.innerWidth);
      updateDebugInfo();
    });
    
    // 定期更新调试信息
    setInterval(updateDebugInfo, 2000);
  </script>
</body>
</html> 